<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin-allow-popups">
  <title>Account Management</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=menu" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=menu_open" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=home" />

  <style>
    body { 
      font-family: Arial, sans-serif; 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      height: 100vh; 
      background: linear-gradient(-45deg, #3b027c, #0e314d, #02103e, #5d1fe4);
      animation: gradientBG 3s ease infinite;
      color: bisque;
    }
    @keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}
    .container { 
      background: rgba(255, 255, 255, 0.238); 
      padding: 50px; 
      border-radius: 8px; 
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); 
      width: 350px;
      text-align: center;
      border-radius: 30px;
      color: aliceblue;
    }
    input, button { 
      display: block; 
      width: 100%; 
      padding: 10px; 
      margin: 10px 0; 
      background-color: rgba(255, 228, 196, 0.159);
      color: bisque;
      border-radius: 30px;
    }
    ::-webkit-input-placeholder {
      color: bisque;
    }
    nav {
    background: transparent;
    backdrop-filter: blur(10px);
    padding: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 100;
    border-radius: 20px;
    top: 2%;

}
#logoutBtn{
    background: transparent;
  top: 1px;
    padding: 1px 4px;
    text-decoration: none;
    color: white;
    font-weight: bold;
    transition: 0.3s;
    font-size: 14px;
    border: none;
    position: relative;
    border-radius: 10px;
    width: 140px;
}


nav .logo {
    font-size: 22px;
    font-weight: bold;
    padding-left: 20px;
}

nav ul, #logoutBtn {
    list-style: none;
    display: flex;
    padding-right: 20px;
}

nav ul li, #logoutBtn {
    margin: 0 15px;
    padding: 10px 20px;
}
nav ul li:hover,#logoutBtn:hover {
    background-color: #00060b6b;
    border-radius: 10px;
    transition: 0.3s ease;
    padding: 15px 25px;
}

nav ul li a {
    text-decoration: none;
    color: white;
    font-weight: bold;
    transition: 0.3s;
    font-size: 14px;
    
}

nav ul li a:hover, #logoutBtn:hover {
    color: #ffbb00;
}
.menu-container {
   display: none;
  }
@media (max-width: 768px) {
    nav {
     display: none;
    
    }
    .menu-container {
        display:flex;
        position: fixed;
        top: 1px;
        left: 20px;
        width: 60px;
        height: auto;
        z-index: 1000;
        font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
      }
      
      /* Main button style */
      .main-btn {
          left: 2%;
          top: 2%;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: #01001efa;
        color: #fff;
        border: none;
        cursor: pointer;
        position: fixed;
        font-size: 30px;
        outline: none;
        transition: transform 0.3s, background 0.3s;
      }
      .main-btn:hover {
        background: #383838;
        transform: scale(1.1);
        transition: transform 0.3s ease;
      }
      .main-btn:active {
        transform: scale(0.95);
      }
  
      /* Collapsible buttons style */
      .collapsible-btn {
        width: 150px;
        height: 50px;
        border-radius: 3%;
        background: #01001efa;
        color: #fff;
        border: none;
        position: absolute;
        top: 15px;
        left: 5px;
        opacity: 0;
        visibility: hidden;
        transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.3s ease;
      }
      .collapsible-btn:hover {
        background: #2b2b2b;
        
      }
      
     #logoutBtn {
        width: 50px;
        height: 50px;
        display: block;
        border-radius: 3%;
        background: #01001efa;
        color: #fff;
        border: none;
        position: absolute;
        top: 15px;
        left: 5px;
        opacity: 0;
        visibility: hidden;
        transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.3s ease;
     }
          /* When menu is open, show buttons vertically */
      .menu-container.open .collapsible-btn {
        opacity: 1;
        visibility: visible;
      }
      
      /* Vertical positions for each button */
      .btn1 { transform: translate(0, 70px); 
        height: 50px; 
        border-radius: 3%;
              }
      .btn2 { transform: translate(0, 140px); 
        height: 50px;
        font-size: 14px;
        border-radius: 3%;
      }
      
      .btn3 { transform: translate(0, 210px); 
        height: 50px;
        font-size: 14px;
        border-radius: 3%;
      }
      .btn4  { transform: translate(0, 280px);
        height: 50px;
        font-size: 14px;
        border-radius: 3%;
       }
      
    
      /* Initially, buttons are hidden */
      .menu-container:not(.open) .collapsible-btn {
        transform: translate(0, 0);
      }

    
    }
    .error-message { color: red; font-size: 14px; margin-top: 5px; display: none; }

    /* Add these responsive styles after your existing styles */

    /* For tablets and medium-sized screens */
    @media screen and (max-width: 768px) {
        .container {
            width: 90%;
            max-width: 350px;
            padding: 30px;
            margin: 20px;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        input, button {
            padding: 8px;
            font-size: 14px;
            margin: 8px 0;
        }

        /* Menu adjustments */
        .main-btn {
            width: 50px;
            height: 50px;
            font-size: 24px;
        }

        .collapsible-btn {
            width: 130px;
            height: 45px;
            font-size: 13px;
        }
    }

    /* For mobile devices */
    @media screen and (max-width: 480px) {
        .container {
            width: 95%;
            padding: 20px;
            margin: 15px;
        }

        h1 {
            font-size: 20px;
            margin-bottom: 15px;
        }

        input, button {
            padding: 8px;
            font-size: 13px;
            margin: 6px 0;
        }

        .error-message {
            font-size: 12px;
        }

        /* Adjust button spacing for mobile */
        .btn1 { transform: translate(0, 60px); }
        .btn2 { transform: translate(0, 110px); }
        .btn3 { transform: translate(0, 160px); }
        .btn4 { transform: translate(0, 210px); }

        /* Menu container adjustments */
        .menu-container {
            left: 10px;
        }
    }

    /* For very small devices */
    @media screen and (max-width: 320px) {
        .container {
            width: 100%;
            padding: 15px;
            margin: 10px;
        }

        h1 {
            font-size: 18px;
        }

        input, button {
            padding: 6px;
            font-size: 12px;
        }

        .collapsible-btn {
            width: 110px;
            font-size: 12px;
        }
    }

    /* For landscape orientation */
    @media screen and (max-height: 480px) and (orientation: landscape) {
        body {
            height: auto;
            padding: 20px 0;
        }

        .container {
            margin: 60px auto 20px auto;
        }

        /* Adjust menu for landscape */
        .btn1 { transform: translate(70px, 0); }
        .btn2 { transform: translate(200px, 0); }
        .btn3 { transform: translate(330px, 0); }
        .btn4 { transform: translate(460px, 0); }
    }

    /* For larger screens */
    @media screen and (min-width: 1440px) {
        .container {
            width: 450px;
            padding: 60px;
        }

        h1 {
            font-size: 28px;
        }

        input, button {
            padding: 12px;
            font-size: 16px;
            margin: 12px 0;
        }
    }

    /* Improve touch targets on mobile */
    @media (hover: none) and (pointer: coarse) {
        input, button, .collapsible-btn {
            min-height: 44px;
        }

        .main-btn {
            min-width: 44px;
            min-height: 44px;
        }
    }

    /* Fix for gradient animation on lower-end devices */
    @media (prefers-reduced-motion: reduce) {
        body {
            animation: none;
            background: linear-gradient(-45deg, #3b027c, #0e314d);
        }
    }

    /* Adjust container position for different screen heights */
    @media screen and (max-height: 600px) {
        body {
            align-items: flex-start;
            padding-top: 80px;
        }

        .container {
            margin-top: 20px;
        }
    }
  </style>
</head>
<body>
  <nav>
    <div class="logo">AI Fake News & Scam Detector</div>
    <ul>
        
        <li><a href="home.html">Home</a></li>
        <li><a href="scamdetect.html">AI Scam Detector</a></li>
        <li><a href="test.html">AI Fake News Detector</a></li>
        <li><a href="https://cybercrime.gov.in/Webform/Accept.aspx">Report</a></li>
        <button id="logoutBtn">Log Out</button>
    </ul>
</nav>    
<div class="menu-container" id="menuContainer">
<button class="main-btn" id="mainBtn">
    <span id="menuIcon" class="material-symbols-outlined">&#xE5D2;</span>
  </button>
  <button class="collapsible-btn btn1" onclick="window.location.href='home.html'">
    <span class="material-symbols-outlined">&#xE88A;</span>
  </button>
  <!-- Other collapsible buttons (placeholders) -->
  <button class="collapsible-btn btn2" onclick="window.location.href='test.html'">AI Fake News Detector</button>
  <button class="collapsible-btn btn3" onclick="window.location.href='scamdetect.html'">AI Scam Detector</button>
  <button id="collapsible-btn btn4" class="collapsible-btn btn4">Log Out</button>
</div>

  <div class="container">
    <h1>Account Details</h1>
    <form id="registrationForm" onsubmit="return validateForm();">
      <input type="text" id="username" placeholder="Username" disabled>
      <input type="email" id="email" placeholder="Email" disabled>
      <input type="text" id="name" placeholder="Name">
      <input type="password" id="password" placeholder="New Password (optional)">
      <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm Password (optional)">
      <button id="updateBtn" type="button">Update Details</button>
      <p class="error-message" id="error-message"></p>
    </form>
  </div>

  <script>
   const mainBtn = document.getElementById('mainBtn');
const menuContainer = document.getElementById('menuContainer');
const menuIcon = document.getElementById('menuIcon');

mainBtn.addEventListener('click', () => {
  menuContainer.classList.toggle('open');
  
  // Toggle icon between menu (closed) and menu_open (open)
  if (menuContainer.classList.contains('open')) {
    menuIcon.innerHTML = "&#xE9BD;";
  } else {
    menuIcon.innerHTML = "&#xE5D2;";
  }
});
function logout() {
    if (confirm("Are you sure you want to log out?")) {
        sessionStorage.clear();
        localStorage.clear();
        window.location.href = "index.html";
    }
}

document.getElementById("logoutBtn").addEventListener("click", logout);
document.getElementById("collapsible-btn btn4").addEventListener("click", logout);

    const firebaseConfig = {
      apiKey: "AIzaSyC_XN3-BBPnJxpP1PHcvN6xgQG5vkM5_1o",
      authDomain: "fraudx-4b017.firebaseapp.com",
      databaseURL: "https://fraudx-4b017-default-rtdb.firebaseio.com",
      projectId: "fraudx-4b017",
      storageBucket: "fraudx-4b017.appspot.com",
      messagingSenderId: "868586515736",
      appId: "1:868586515736:web:92b3f2152775d8c347826d"
    };

    // ðŸ”¥ Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Get user email from session storage
    const userEmail = sessionStorage.getItem("email");
   if (!userEmail) {
      window.location.href = "login.html"; // Redirect to login if not logged in
     }

    // Create a userId by replacing non-alphanumeric characters
    const userId = userEmail.replace(/[^a-zA-Z0-9]/g, "_");
    const userRef = db.ref("users/" + userId);

    // Fetch and display user details
    userRef.get().then(snapshot => {
      if (snapshot.exists()) {
        const userData = snapshot.val();
        document.getElementById("username").value = userData.username || "";
        document.getElementById("email").value = userData.email || "";
        document.getElementById("name").value = userData.name || "";
      } else {
        document.getElementById("error-message").textContent = "User not found!";
        document.getElementById("error-message").style.display = "block";
      }
    });

    // Update user details (without profile picture)
    document.getElementById("updateBtn").addEventListener("click", async function () {
      const updatedName = document.getElementById("name").value;
      const updatedPassword = document.getElementById("password").value;
      const errorMessage = document.getElementById("error-message");

      if (!updatedName) {
        errorMessage.textContent = "Name cannot be empty!";
        errorMessage.style.display = "block";
        return;
      }

      const updatedData = {
        name: updatedName,
        password: updatedPassword || null,
      };

      userRef.update(updatedData)
        .then(() => {
          alert("Details updated successfully!");
        })
        .catch(error => {
          console.error("Error updating details:", error);
          errorMessage.textContent = "Error updating details!";
          errorMessage.style.display = "block";
        });
    });
  </script>

</body>
</html>
